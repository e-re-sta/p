<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>CitrusArcade â€“ Effekte</title>
<style>
body {
    background: #111;
    margin: 0;
    overflow-x: hidden;
}

/* ========================== */
/*  FALL-ANIMATION            */
/* ========================== */
@keyframes fallDown {
    from { transform: translateY(-50px); opacity: 1; }
    to   { transform: translateY(120vh); opacity: 0; }
}

/* ========================== */
/*  FUNKEN / LAVA             */
/* ========================== */
@keyframes sparkRise {
    from { transform: translateY(0) translateX(0); opacity: 1; }
    to   { transform: translateY(-150px) translateX(40px); opacity: 0; }
}

/* ========================== */
/* NEBEL                      */
/* ========================== */
@keyframes fogMove {
    from { transform: translateX(-200px); opacity: 0.4; }
    to   { transform: translateX(200px); opacity: 0.7; }
}

.fog {
    position: fixed;
    top: 20vh;
    left: 0;
    width: 100%;
    height: 200px;
    background: radial-gradient(circle, rgba(200,200,200,0.4), transparent);
    animation: fogMove 10s ease-in-out infinite alternate;
    z-index: 9998;
    pointer-events: none;
    filter: blur(30px);
}

/* ========================== */
/* BLITZE                     */
/* ========================== */
@keyframes lightningFlash {
    0% { opacity: 0; }
    10% { opacity: 1; }
    15% { opacity: 0; }
    20% { opacity: 1; }
    25% { opacity: 0; }
    100% { opacity: 0; }
}
.lightning {
    position: fixed;
    inset: 0;
    background: white;
    opacity: 0;
    animation: lightningFlash 0.6s ease-out;
    z-index: 999999;
    pointer-events: none;
}

/* ========================== */
/* FEUER-AM-RAND             */
/* ========================== */
.fire-edge {
    pointer-events: none;
    position: fixed;
    inset: 0;
    animation: fireGlow 0.2s infinite;
    box-shadow: 0 0 60px 30px rgba(255,50,0,0.9) inset;
    z-index: 999999;
}
@keyframes fireGlow {
    0%   { box-shadow: 0 0 40px 20px rgba(255,120,0,0.7) inset; }
    50%  { box-shadow: 0 0 80px 30px rgba(255,0,0,1) inset; }
    100% { box-shadow: 0 0 40px 20px rgba(255,120,0,0.7) inset; }
}

/* ========================== */
/*  AUTOS                     */
/* ========================== */
@keyframes drive {
    from { transform: translateX(-200px); }
    to   { transform: translateX(120vw); }
}
.car {
    position: fixed;
    bottom: 20px;
    font-size: 50px;
    z-index: 99990;
    animation: drive linear;
}
</style>
</head>

<body>

<div class="fire-edge"></div>
<div id="fogContainer"></div>

<script>
console.log("%cEFFEKT ENGINE STARTET", "color: lime");

/* ========================== */
/*  RANDOM HELPERS            */
/* ========================== */
function rnd(min, max) { return Math.random() * (max - min) + min; }

/* ========================== */
/*  GENERISCHE FALL-ELEMENTE  */
/* ========================== */
function spawnFalling(emoji, size) {
    let e = document.createElement("div");
    e.innerHTML = emoji;
    e.style.position = "fixed";
    e.style.left = rnd(0, window.innerWidth) + "px";
    e.style.top = "-60px";
    e.style.fontSize = size + "px";
    e.style.zIndex = 99999;
    e.style.animation = "fallDown " + rnd(3,6) + "s linear";

    document.body.appendChild(e);
    setTimeout(() => e.remove(), 7000);
}

/* ========================== */
/*  EFFEKTGRUPPEN             */
/* ========================== */

function startCucumber() {
    console.log("ðŸ¥’ Gurkenregen");
    return setInterval(() => spawnFalling("ðŸ¥’", 40), 200);
}
function startSnow() {
    console.log("â„ï¸ Schnee");
    return setInterval(() => spawnFalling("â„ï¸", 30), 150);
}
function startIvy() {
    console.log("ðŸŒ¿ Efeu");
    return setInterval(() => spawnFalling("ðŸŒ¿", 35), 180);
}
function startSparks() {
    console.log("ðŸ”¥ Lava Funken");
    return setInterval(() => {
        let s = document.createElement("div");
        s.innerHTML = "âœ¨";
        s.style.position = "fixed";
        s.style.left = rnd(0, window.innerWidth) + "px";
        s.style.top = rnd(70, 95) + "vh";
        s.style.fontSize = "20px";
        s.style.color = "orange";
        s.style.animation = "sparkRise 1.5s ease-out";
        s.style.zIndex = 99990;
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 1500);
    }, 80);
}
function startFog() {
    console.log("ðŸŒ«ï¸ Nebel");
    let fog = document.createElement("div");
    fog.classList.add("fog");
    fog.id = "fog";
    document.body.appendChild(fog);
    return fog;
}

/* ========================== */
/*  BLITZE                    */
/* ========================== */
function flashLightning() {
    let l = document.createElement("div");
    l.classList.add("lightning");
    document.body.appendChild(l);
    setTimeout(() => l.remove(), 700);
}

/* ========================== */
/*  AUTOS                     */
/* ========================== */

function spawnCar() {
    console.log("ðŸš— Auto fÃ¤hrt vorbei");
    let car = document.createElement("div");
    car.classList.add("car");
    car.innerHTML = ["ðŸš—", "ðŸš™", "ðŸš•", "ðŸŽï¸"][Math.floor(Math.random()*4)];
    car.style.bottom = rnd(10,50) + "px";
    car.style.animationDuration = rnd(3,7) + "s";
    document.body.appendChild(car);
    setTimeout(() => car.remove(), 8000);
}

/* Crash */
function carCrash() {
    console.log("ðŸ’¥ CRASH!");

    let car1 = document.createElement("div");
    let car2 = document.createElement("div");
    car1.className = car2.className = "car";

    car1.innerHTML = "ðŸš—";
    car2.innerHTML = "ðŸš™";

    car1.style.left = "-200px";
    car2.style.right = "-200px";

    car1.style.bottom = "40px";
    car2.style.bottom = "40px";

    car1.style.animation = "drive 3s linear";
    car2.style.animation = "drive 3s linear reverse";

    document.body.appendChild(car1);
    document.body.appendChild(car2);

    setTimeout(() => {
        car1.innerHTML = "ðŸ’¥";
        car2.innerHTML = "";
    }, 1500);

    setTimeout(() => { car1.remove(); car2.remove(); }, 5000);
}

/* alle 20â€“40 Sek ein Auto */
setInterval(() => spawnCar(), rnd(20000, 40000));

/* alle 2 Minuten Crash */
setInterval(() => carCrash(), 120000);

/* ========================== */
/*  ZUFÃ„LLIGER EFFEKTZYKLUS   */
/* ========================== */

let currentEffect = null;

function stopEffect(e) {
    if (!e) return;
    if (typeof e === "number") clearInterval(e); // interval
    if (e instanceof HTMLElement) e.remove(); // fog
}

const effectList = [
    startCucumber,
    startSnow,
    startIvy,
    startSparks,
    startFog
];

function cycleEffects() {
    stopEffect(currentEffect);

    // zufÃ¤lliger Effekt
    let effect = effectList[Math.floor(Math.random() * effectList.length)];
    currentEffect = effect();

    // Gewitterchance
    if (Math.random() < 0.3) {
        setTimeout(flashLightning, rnd(500, 2000));
        setTimeout(flashLightning, rnd(1500, 3000));
    }

    // Dauer 12â€“18 Sekunden
    setTimeout(cycleEffects, rnd(12000, 18000));
}

cycleEffects();
</script>

</body>
</html>
