<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CitrusArcade</title>
<style>
/* Grundstyles */
body { margin:0; font-family:sans-serif; background:#111; color:#eee; transition:0.3s; overflow-x:hidden;}
body.light { background:#fafafa; color:#111;}
header { display:flex; align-items:center; padding:10px 20px; background:#111; justify-content:space-between;}
header.light { background:#eee;}
header h1 { margin:0; font-size:1.5em;}
button { cursor:pointer; border:none; border-radius:5px; padding:8px 12px; margin:0 5px; color:#fff; background:#ff6600;}
button:hover { background:#ffa040;}
#logoReload { width:50px; height:50px; background:url('logo.png') no-repeat center/contain; border:none; cursor:pointer;}
#games { display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:15px; padding:15px;}
.game-btn { background:#222; padding:15px; text-align:center; border-radius:10px; cursor:pointer; border:2px solid #555;}
.game-btn:hover { transform:scale(1.05); border-color:#ff6600;}
#gameFrame { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000c; justify-content:center; align-items:center; z-index:10;}
#gameBox { width:90%; height:90%; background:#000; border:3px solid #ff6600; border-radius:15px; position:relative; overflow:hidden;}
#closeGame { position:absolute; top:10px; right:10px; padding:5px 10px; background:#ff6600; cursor:pointer;}
#effectsLayer { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;}
.fx { position:absolute; width:100%; height:100%; top:0; left:0; pointer-events:none;}
.fx.rain { background: repeating-linear-gradient(to bottom, rgba(255,255,255,0.2) 0 2px, transparent 2px 4px); animation: fall 6s linear infinite;}
.fx.fire { background: radial-gradient(circle, rgba(255,100,0,0.3) 0%, transparent 70%); animation: flicker 12s infinite;}
.fx.snow { background: repeating-linear-gradient(to bottom, rgba(255,255,255,0.3) 0 2px, transparent 2px 4px); animation: snow 12s linear infinite;}
.fx.vines { background: url('vines.png') repeat; animation: grow 20s linear infinite;}
.fx.ivy { background: url('ivy.png') repeat; animation: grow 32s linear infinite;}
@keyframes fall {0%{background-position:0 0;}100%{background-position:0 100%;}}
@keyframes flicker {0%,100%{opacity:1;}50%{opacity:0.5;}}
@keyframes snow {0%{background-position:0 0;}100%{background-position:0 100%;}}
@keyframes grow {0%{background-size:0;}50%{background-size:50%;}100%{background-size:100%;}}
</style>
</head>
<body>
<header>
  <button id="logoReload" title="Reload"></button>
  <h1>CitrusArcade</h1>
  <div>
    <button id="darkModeBtn">Darkmode</button>
    <button id="walletBtn">Connect Wallet</button>
  </div>
</header>

<div id="games">
  <!-- 12 Game Buttons -->
  <div class="game-btn" data-game="1">Game 1</div>
  <div class="game-btn" data-game="2">Game 2</div>
  <div class="game-btn" data-game="3">Game 3</div>
  <div class="game-btn" data-game="4">Game 4</div>
  <div class="game-btn" data-game="5">Game 5</div>
  <div class="game-btn" data-game="6">Game 6</div>
  <div class="game-btn" data-game="7">Game 7</div>
  <div class="game-btn" data-game="8">Game 8</div>
  <div class="game-btn" data-game="9">Game 9</div>
  <div class="game-btn" data-game="10">Game 10</div>
  <div class="game-btn" data-game="11">Game 11</div>
  <div class="game-btn" data-game="12">Game 12</div>
</div>

<div id="gameFrame">
  <div id="gameBox">
    <button id="closeGame">Back</button>
    <div id="gameContent">Game Placeholder</div>
  </div>
</div>

<div id="effectsLayer"></div>

<script>
// Darkmode
const body = document.body;
document.getElementById('darkModeBtn').addEventListener('click',()=>{
  body.classList.toggle('light');
});

// Reload
document.getElementById('logoReload').addEventListener('click',()=>{
  location.reload();
});

// Game Buttons
const gameBtns = document.querySelectorAll('.game-btn');
const gameFrame = document.getElementById('gameFrame');
const gameContent = document.getElementById('gameContent');
const closeGame = document.getElementById('closeGame');

gameBtns.forEach(btn=>{
  btn.addEventListener('click',()=>{
    // Wallet Check
    if(!walletConnected && paymentActive){
      alert('Please connect your wallet first!');
      return;
    }
    gameContent.textContent = `Game ${btn.dataset.game} Placeholder`;
    gameFrame.style.display='flex';
  });
});

closeGame.addEventListener('click',()=>{gameFrame.style.display='none';});

// Special Effects Engine
const effectsLayer = document.getElementById('effectsLayer');
const effects = ['rain','fire','snow','vines','ivy'];
let currentEffect = 0;
function nextEffect(){
  effectsLayer.innerHTML='';
  const fx = document.createElement('div');
  fx.classList.add('fx',effects[currentEffect]);
  effectsLayer.appendChild(fx);
  currentEffect = (currentEffect+1)%effects.length;
  setTimeout(nextEffect,5000);
}
nextEffect();

// Wallet / Paywall Placeholder
let walletConnected=false;
const paymentActive=true;
document.getElementById('walletBtn').addEventListener('click',async()=>{
  // MetaMask
  if(window.ethereum){
    try{
      await window.ethereum.request({method:'eth_requestAccounts'});
      walletConnected=true;
      alert('MetaMask connected!');
    }catch(e){alert('MetaMask connection failed');}
  }else{
    alert('MetaMask not detected.');
  }
  // Phantom/Solana placeholder
  if(window.solana && window.solana.isPhantom){
    try{
      await window.solana.connect();
      walletConnected=true;
      alert('Phantom Wallet connected!');
    }catch(e){alert('Phantom connection failed');}
  }
});
</script>
</body>
</html>
