<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OrangeWeb Portal</title>
<style>
body { margin:0; font-family:sans-serif; background:#111; color:#eee; transition:0.3s; overflow-x:hidden;}
body.light { background:#fafafa; color:#111;}
header { display:flex; justify-content:space-between; align-items:center; padding:20px; background:#111;}
header.light { background:#eee;}
.btn { background:#ff6600; border:none; padding:10px 15px; border-radius:5px; cursor:pointer; color:#fff; margin:0 5px;}
.btn:hover { background:#ffa040;}
#games { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:15px; padding:20px;}
.game-btn { background:#222; padding:20px; text-align:center; border-radius:10px; cursor:pointer; border:2px solid #555;}
.game-btn:hover { transform:scale(1.05); border-color:#ff6600;}
#gameFrame { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000c; justify-content:center; align-items:center;}
#gameBox { width:90%; height:90%; background:#000; border:3px solid #ff6600; border-radius:15px; position:relative; overflow:hidden;}
#closeGame { position:absolute; top:15px; right:15px; background:#ff6600;}
#effectsLayer { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;}
.fx { position:absolute; width:100%; height:100%; top:0; left:0; pointer-events:none;}
.fx.rain { background: repeating-linear-gradient(to bottom, rgba(255,255,255,0.2) 0 2px, transparent 2px 4px); animation: fall 6s linear infinite;}
.fx.fire { background: radial-gradient(circle, rgba(255,100,0,0.3) 0%, transparent 70%); animation: flicker 12s infinite;}
.fx.snow { background: repeating-linear-gradient(to bottom, rgba(255,255,255,0.3) 0 2px, transparent 2px 4px); animation: snow 12s linear infinite;}
.fx.vines { background: url('vines.png') repeat; animation: grow 10s linear infinite;}
.fx.ivy { background: url('ivy.png') repeat; animation: grow 16s linear infinite;}
.fx.cucumber { background: url('cucumber.png') repeat; animation: fall 12s linear infinite;}

@keyframes fall { from {background-position:0 0;} to {background-position:0 100%;} }
@keyframes flicker { 0%,100%{opacity:0.2;}50%{opacity:0.5;} }
@keyframes snow { from {background-position:0 0;} to {background-position:0 100%;} }
@keyframes grow { from {background-size:0 0;} to {background-size:100% 100%;} }
</style>
</head>
<body>

<header>
  <button class="btn" onclick="window.location.reload()">Reload</button>
  <div>OrangeWeb Portal</div>
  <button class="btn" onclick="toggleDark()">Dark / Light</button>
  <button class="btn" onclick="connectWallet()">Connect Wallet</button>
</header>

<div id="games">
  <div class="game-btn" data-game="1">Game 1</div>
  <div class="game-btn" data-game="2">Game 2</div>
  <div class="game-btn" data-game="3">Game 3</div>
  <div class="game-btn" data-game="4">Game 4</div>
  <div class="game-btn" data-game="5">Game 5</div>
  <div class="game-btn" data-game="6">Game 6</div>
  <div class="game-btn" data-game="7">Game 7</div>
  <div class="game-btn" data-game="8">Game 8</div>
  <div class="game-btn" data-game="9">Game 9</div>
  <div class="game-btn" data-game="10">Game 10</div>
  <div class="game-btn" data-game="11">Game 11</div>
  <div class="game-btn" data-game="12">Game 12</div>
</div>

<div id="gameFrame">
  <div id="gameBox">
    <button id="closeGame" class="btn" onclick="closeGame()">X</button>
    <iframe id="gameIFrame" style="width:100%; height:100%; border:0;"></iframe>
  </div>
</div>

<div id="effectsLayer"></div>

<script>
// Darkmode
function toggleDark() { document.body.classList.toggle("light"); }

// Wallet/Payment Paywall Placeholder
let walletConnected = false;
let paywallActive = true;
function connectWallet() {
    walletConnected = true;
    alert("Wallet verbunden (Paywall aktiv). Zahlungen müssen noch integriert werden.");
}

// Game öffnen
document.querySelectorAll('.game-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        if(!walletConnected && paywallActive){
            alert("Bitte zuerst Wallet verbinden!");
            return;
        }
        const gameId = btn.getAttribute('data-game');
        document.getElementById('gameFrame').style.display = 'flex';
        document.getElementById('gameIFrame').src = `games/game${gameId}.html`;
    });
});

// Game schließen
function closeGame() {
    document.getElementById('gameFrame').style.display = 'none';
    document.getElementById('gameIFrame').src = '';
}

// Special Effects Engine (doppelte Dauer)
const layer = document.getElementById("effectsLayer");
let effectCycle = [
    {effect:"vines", duration:10000},
    {effect:"fire", duration:14000},
    {effect:"snow", duration:24000},
    {effect:"cucumber", duration:12000},
    {effect:"ivy", duration:16000},
    {effect:"fire", duration:20000},
    {effect:"rain", duration:12000}
];
let idx = 0;
function nextEffect(){
    layer.innerHTML = `<div class="fx ${effectCycle[idx].effect}"></div>`;
    setTimeout(() => {
        idx = (idx+1)%effectCycle.length;
        nextEffect();
    }, effectCycle[idx].duration);
}
nextEffect();
</script>

</body>
</html>
